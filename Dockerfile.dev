# Dockerfile.dev
FROM ubuntu:24.04

# Install system dependencies
RUN apt-get update && apt-get install -y \
    build-essential \
    bear \
    clang \
    clang-format \
    clang-tidy \
    file \
    linux-tools-common \
    linux-tools-generic \
    linux-tools-$(uname -r) \
    llvm \
    libbpf-dev \
    libelf-dev \
    zlib1g-dev \
    linux-headers-generic \
    pkg-config \
    git \
    gdb \
    valgrind \
    strace \
    vim \
    curl \
    wget \
    sudo \
    && rm -rf /var/lib/apt/lists/*

# Create development user
RUN useradd -m -s /bin/bash developer && \
    echo 'developer ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers

# Set up workspace
WORKDIR /workspace
RUN chown developer:developer /workspace

ENV TERM=xterm-256color

USER developer

# Install additional development tools
RUN echo 'alias ll="ls -la"' >> ~/.bashrc && \
    echo 'export PS1="\u@hpmon-dev:\w$ "' >> ~/.bashrc

CMD ["/bin/bash"]
